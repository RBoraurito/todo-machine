var k=Object.defineProperty,M=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var N=(t,e,o)=>e in t?k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,y=(t,e)=>{for(var o in e||(e={}))A.call(e,o)&&N(t,o,e[o]);if(T)for(var o of T(e))j.call(e,o)&&N(t,o,e[o]);return t},S=(t,e)=>M(t,L(e));import{r as a,j as _,R as C,a as $}from"./vendor.86f66cac.js";const w=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}};w();function D(t,e){const[o,c]=a.exports.useState(e),[s,n]=a.exports.useState(!0),[l,f]=a.exports.useState("");return a.exports.useEffect(()=>{const i=localStorage.getItem(t);let p=e;setTimeout(()=>{try{i?p=JSON.parse(i):(localStorage.setItem(t,JSON.stringify(e)),p=JSON.parse(localStorage.getItem(t)))}catch{f("Ha ocurrido un error")}c(p),n(!1)},2e3)},[]),{items:o,saveItems:i=>{try{localStorage.setItem(t,JSON.stringify(i)),c(i)}catch{f("Ha ocurrido un error")}},loading:s,error:l}}const r=_.exports.jsx,u=_.exports.jsxs,h=a.exports.createContext();function E(t){const{items:e,saveItems:o,loading:c,error:s}=D("todos",[]),[n,l]=a.exports.useState(""),[f,v]=a.exports.useState(!1),i=e.filter(d=>d.completed).length,p=d=>{const g=e.map(m=>m.text===d?S(y({},m),{completed:!m.completed}):m);o(g)},O=d=>{console.log([...e,d]),o([...e,d])},b=d=>{const g=e.filter(m=>m.text!==d);o(g)},I=d=>{l(d.target.value)},x=[];return n.length===0?x.push(...e):x.push(...e.filter(d=>d.text.toLowerCase().includes(n.toLowerCase()))),r(h.Provider,{value:{searchedTodos:x,uncompletedTodos:i,loading:c,error:s,toggleTodo:p,removeTodo:b,search:n,handleSearch:I,isOpenModal:f,setOpenModal:v,addTodo:O},children:t.children})}const R=()=>{const{searchedTodos:t,uncompletedTodos:e}=a.exports.useContext(h);return u("header",{className:"todo-header",children:[r("h1",{children:"TODO App"}),u("h2",{children:["Has realizado ",e," de ",t.length," TODOs"]})]})};const H=()=>{const{handleSearch:t}=a.exports.useContext(h);return r("input",{className:"todo__search",type:"search",name:"search",id:"search",placeholder:"Search your items",onInput:t})};const P=({children:t})=>r("section",{className:"todo__list",children:r("ul",{children:t})});const J=({todo:t,toggle:e,remove:o})=>{const c=()=>{e(t.text)},s=()=>{o(t.text)};return u("li",{className:`todo__item ${t.completed&&"checked"}`,children:[r("button",{type:"button",className:"todo__item__check",onClick:c}),r("p",{onClick:c,children:t.text}),r("button",{className:"close-button",onClick:s,children:"x"})]})};const B=()=>{const{setOpenModal:t,isOpenModal:e}=a.exports.useContext(h);return r("button",{type:"button",className:"todo__create-button",onClick:()=>{t(!e)},children:"A\xF1adir TODO"})};const q=()=>{const{addTodo:t,setOpenModal:e}=a.exports.useContext(h),o=()=>{e(!1)},c=a.exports.useRef(null);return u("form",{onSubmit:n=>{n.preventDefault();const l={text:c.current.value,completed:!1};t(l),c.current.value="",o()},className:"modal__body",children:[r("legend",{children:"Add a new todo"}),r("textarea",{placeholder:"Go to the market",ref:c,name:"todo",id:"",cols:"30",rows:"10",required:!0}),u("div",{className:"modal__buttons",children:[r("button",{type:"button",className:"cancel",onClick:o,children:"Cancel"}),r("button",{type:"submit",children:"Add todo"})]})]})};function F({children:t}){return C.createPortal(t,document.getElementById("modal"))}function z(){const{searchedTodos:t,loading:e,error:o,toggleTodo:c,removeTodo:s,isOpenModal:n}=a.exports.useContext(h);return u("main",{className:"todo",children:[r(R,{}),r(H,{}),u(P,{children:[t.map(l=>r(J,{todo:l,toggle:c,remove:s,className:"checked"},l.text)),t.length===0&&!e&&r("p",{className:"todo__message",children:"No hay tareas"}),e&&r("p",{className:"todo__message",children:"Cargando..."}),o&&r("p",{className:"todo__message",children:"Error al cargar las tareas"})]}),r(F,{children:r("div",{className:"modal",style:{display:n?"flex":"none"},children:r(q,{})})}),r(B,{})]})}C.render(r($.StrictMode,{children:r(E,{children:r(z,{})})}),document.getElementById("root"));
